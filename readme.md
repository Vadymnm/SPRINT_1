

# Проект для анализа и визуализации данных об акциях

## Общий обзор

Этот проект предназначен для загрузки исторических данных об акциях и их визуализации. Он использует библиотеку yfinance для получения данных и matplotlib для создания графиков. Пользователи могут выбирать различные тикеры и временные периоды для анализа, а также просматривать движение цен и скользящие средние на графике.

## Структура и модули проекта

#### 1. **main.py:**

- Является точкой входа в программу.

- Запрашивает у пользователя тикер акции,  временной период  и   порог  анализа  колебаний  цены; загружает данные, обрабатывает их и выводит результаты на  консоль,  в виде графика  и  сохраненных  файлов.

#### 2. **data_download.py:**

- Отвечает за загрузку данных об акциях.

- Содержит функции:

      - извлечения данных об акциях из интернета   
      - расчёта скользящего среднего  
      - расчета среднего значения цены  за  период  
      - оценки  степени  колебаний  цены  и  сравнения  с  заданным
        порогом
      - сохранения  файла  данных  в  формате .csv
      - расчета  RSI
  - 
-

#### 3. **data_plotting.py:**

- Отвечает за визуализацию данных.

- Содержит функции для создания и сохранения графиков цен закрытия и скользящих средних
- Содержит  функции для  создания и сохранения графиков RSI

      
      
## Описание функций

#### 1. **main.py:**

- **main():** Основная функция, управляющая процессом загрузки, обработки данных и их визуализации. Запрашивает у пользователя ввод данных, вызывает функции загрузки и обработки данных, а затем передаёт результаты на визуализацию.

#### 2. **data_download.py:**

- **fetch_stock_data(ticker, period):** 
    Получает исторические данные об акциях для указанного тикера и временного периода. Возвращает DataFrame с данными.

- **fetch_stock_data_1(ticker, start, end):** 
    Получает данные об акциях для указанного тикера в диапазоне дат "start - end". Возвращает DataFrame с данными.

- **add_moving_average(data, window_size):** 
    Добавляет в DataFrame колонку со скользящим средним, рассчитанным на основе цен закрытия.

- **calculate_and_display_average_price(data):**
    """
    function calculate average price of "Closed" data.
    Result is printed out in console.
    """
- **notify_if_strong_fluctuations(data, threshold):**
    """
    function get DataFrame(data),  calculate minimum  and maximum
    price, and compare ratio of minimum  and maximum  with
    given threshold. Result is printed out in console.
    """
- **export_data_to_csv(data, filename):**
    """
    function get DataFrame(data) and save
    data as filename file in .csv format
    """
- **rsi_calculation(data):**
    """
    function get DataFrame(data),  calculate  
    and return RSI
    """
#### 3. **data_plotting.py:**

- **create_and_save_plot(data, ticker, period, style, filename)** 
--  Создаёт график, отображающий цены закрытия и скользящие средние. Предоставляет возможность сохранения графика в файл. Параметр filename опционален; если он не указан, имя файла генерируется автоматически.

- **create_and_save_rsi_plot(data, ticker, period, rsi, style, filename=None)**
--  Создаёт два  графика на одном листе, отображающие динамику цен закрытия и RSI  на отдельных  графиках. Предоставляет возможность сохранения графика в файл. Параметр filename опционален; если он не указан, имя файла генерируется автоматически.

## Пошаговое использование

1. Запустите main.py.
2. Введите интересующий вас тикер акции (например, 'AAPL' для Apple Inc).
3. Выберите диапазон дат анализа  данных - период ('P')  либо даты начала и конца ('D). 
4. Введите желаемый временной период для анализа (например, '1mo' для данных за один месяц)
   либо  Даты начала и конца  анализа в формате Y-M-D.
5. Введите порог  колебаний  средней  цены  акции в %.


#### Программа

      - обработает введённые данные, 
      - загрузит соответствующие данные об акциях, 
      - сохранит  данные  в  .csv  файле,  
      - рассчитает скользящее среднее,  
      - построит и сохранит график в .png файле  
      - выведет  в терминале данные  расчетов  средней  цены,
      - выведет  в терминале данные  о минимальной и максимальной  цене  и  результаты  анализа  относительно  порога.
      - рассчитает RSI
      - построит и сохранит график в .png файле

## Примеры работы программы

### Терминал,  вариант 1:
####============= Ввод  исходных  данных ==================
- Введите тикер акции (например, «AAPL» для Apple Inc):»Googl
Выберите диапазон дат анализа данных - период ('P') либо даты начала и конца ('D) d
 - - d
- Введите дату начала анализа в формате Y-M-D): 2020-01-01
- Введите дату конца анализа в формате Y-M-D): 2020-12-30
- Введите порог оценки колебаний цены в %:15
- "Введите номер желательного стиля графика 'style' из  приведенного списка(0,4,5,8,9,11,16,26):
style = Solarize_Light2
#### ******************** POGRAMM  START *****************************
 - - DataFrame сохранен как Googl_2020-01-01_2020-12-30_DataFrame.csv
 - - График сохранен как Googl_2020-01-01_2020-12-30_stock_price_chart.png
--------------------------------------------------
 - - Average closed price for period is: 73.844
--------------------------------------------------
 - - min price = 50.444 ; max price = 92.191
 - - Колебания цены за контрольный период БОЛЕЕ 15 % ( 83 % !!!)
 - - График сохранен как Googl_2020-01-01_2020-12-30_RSI_chart.png

### Терминал, вариант 2:
 - Введите тикер акции (например, «AAPL» для Apple Inc):»Googl
 - Выберите диапазон дат анализа данных - период ('P') либо даты начала и конца ('D) p
 - - p
 - Введите период для данных (например, '1mo' для одного месяца): 1y
 - Введите порог оценки колебаний цены в %:15
 - - DataFrame сохранен как Googl_1y_DataFrame.csv
 - - График сохранен как Googl_1y_stock_price_chart.png
--------------------------------------------------
 - - Average closed price for period is: 175.242
--------------------------------------------------
- - min price = 163.513 ; max price = 195.61
- - Колебания цены за контрольный период БОЛЕЕ 15 % ( 20 % !!!)
- - График сохранен как Googl_1y_RSI_chart.png

![Alt_text](Googl_5y_stock_price_chart.png){ : widht="50%" }
![Alt_text](Googl_5y_RSI_chart.png)

